"Diwali Discount Calculation"

import time

# ANSI Color Codes for better console output
RED = '\033[91m'
GREEN = '\033[92m'
YELLOW = '\033[93m'
CYAN = '\033[96m'
MAGENTA = '\033[95m'
RESET = '\033[0m'

def apply_discount(total):
    """Calculate discount based on total bill."""
    if total > 2000:
        return 0.25, "Mega Offer ğŸ (25%)"
    elif total > 1000:
        return 0.15, "Festival Offer ğŸª” (15%)"
    elif total > 500:
        return 0.10, "Diwali Offer âœ¨ (10%)"
    else:
        return 0.00, "No Discount ğŸ˜…"

def add_cashback(final_total):
    """Add cashback coupons based on total spent."""
    if final_total > 2000:
        cashback = 200
    elif final_total > 1000:
        cashback = 100
    elif final_total > 500:
        cashback = 50
    else:
        cashback = 0
    return cashback

def print_bill_summary(prices, total, discount, final_total, rate, offer_text, cashback):
    """Neatly formatted bill output with colors."""

    print("\n" + MAGENTA + "=" * 60)
    print(f"ğŸ’¸  DIWALI DISCOUNT CALCULATOR  ğŸ’¸".center(60))
    print("=" * 60 + RESET)

    print(YELLOW + "\nğŸ›ï¸  ITEMIZED BILL:" + RESET)
    print("â”€" * 60)
    for i, price in enumerate(prices, start=1):
        print(f"Item {i:<2}: â‚¹{price:>7.2f}")
    print("â”€" * 60)
    print(f"{CYAN}Total Before Discount : â‚¹{total:.2f}{RESET}")
    print(f"{YELLOW}Applied Offer          : {offer_text}{RESET}")
    print(f"{GREEN}Discount Amount        : â‚¹{discount:.2f} ({rate*100:.0f}% OFF){RESET}")
    print(f"{MAGENTA}Final Payable Amount   : â‚¹{final_total:.2f}{RESET}")

    if cashback > 0:
        print(f"{CYAN}ğŸ’° Cashback Bonus       : â‚¹{cashback:.2f} (Next Purchase Credit){RESET}")
    else:
        print(f"{RED}No cashback this time! Buy more next time ğŸ˜‰{RESET}")

    print("â”€" * 60)
    total_savings = discount + cashback
    print(f"{GREEN}ğŸ‰ Total Savings this Diwali  : â‚¹{total_savings:.2f}{RESET}")
    print(MAGENTA + "=" * 60)
    print(f"âœ¨ THANK YOU! HAPPY DIWALI! âœ¨".center(60))
    print("=" * 60 + RESET)


def main():
    print(CYAN + "=" * 70)
    print("ğŸª”  DIWALI FESTIVE DISCOUNT BILLING SYSTEM  ğŸª”".center(70))
    print("=" * 70 + RESET)

    # Input with validation
    while True:
        try:
            prices = list(map(float, input("\nEnter item prices separated by space: ").split()))
            if not prices:
                print(RED + "âš ï¸  Please enter at least one price!" + RESET)
                continue
            if any(p <= 0 for p in prices):
                print(RED + "âš ï¸  Prices must be positive numbers!" + RESET)
                continue
            break
        except ValueError:
            print(RED + "âŒ Invalid input! Please enter numbers only." + RESET)

    # Optional: sort items for clarity
    prices.sort(reverse=True)

    total = sum(prices)
    rate, offer_text = apply_discount(total)
    discount = total * rate
    final_total = total - discount
    cashback = add_cashback(final_total)

    time.sleep(0.5)
    print_bill_summary(prices, total, discount, final_total, rate, offer_text, cashback)


if __name__ == "__main__":
    main()
